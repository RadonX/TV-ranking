<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TV Ranking </title>
    <link href="static/css/lib/foundation.css" rel="stylesheet" />
    <link href='http://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.css' rel='stylesheet' type='text/css'>
    <link href="static/css/main.css" rel="stylesheet" />


</head>

<body>

<div class="row full">

    <!-- modal content -->
    <div id="myModal" class="reveal" data-reveal aria-labelledby="login or sign up" aria-hidden="true" role="dialog">
        <div class="row">
            <div class="large-6 columns auth-plain">
                <div class="signup-panel left-solid">
                    <!-- <p class="welcome">Registered Users</p> -->
                    <p></p>
                    <form>
                        <div class="row collapse">
                            <div class="small-2  columns">
                                <span class="prefix"><i class="fi-torso-female"></i></span>
                            </div>
                            <div class="small-10  columns">
                                <input type="text" placeholder="username" id="username">
                            </div>
                        </div>
                        <div class="row collapse">
                            <div class="small-2 columns ">
                                <span class="prefix"><i class="fi-lock"></i></span>
                            </div>
                            <div class="small-10 columns ">
                                <input type="text" placeholder="password" id="password">
                            </div>
                        </div>
                    </form>
                    <a href="javascript:login();" class="button ">Log In </a>
                    <a href="#" class="button ">Sign Up</a><br/>
                </div>
            </div>
            <div class="large-6 columns auth-plain">
                <div class="signup-panel newusers">
                    <p class="welcome"> New User?</p>
                    <p>By creating an account with us, you will be able to bookmark your favorite TV shows, view and get recommendations and more.</p><br>
                    <!-- <a href="#" class="button ">Sign Up</a></br> -->
                </div>
            </div>
        </div>
        <a class="close-button" data-close aria-label="Close modal">
            <!--<span aria-hidden="true">&times;</span>-->
            &#215;
        </a>
    </div>


    <div class="sidebar medium-12 large-3 columns">
        <div class="profile" id="logout">
            <img src="static/img/rating-pink-256.png" alt="" />
            <h1 id="user"><a href="#">SocialTVRating</a></h1>
            <a href="#" class="button ghost" data-open="myModal">SignUp</a>
            <a href="#" class="button ghost" data-open="myModal">Login</a>
        </div>

        <div id="menu">
            <ul>

                <li class="current_page_item"><a href="/" accesskey="1" title="">Featured</a></li>
                <li><a href="/ranking" accesskey="3" title="">Top TV shows</a></li>

            </ul>
        </div>

        <form class="has-form">
            <div class="row collapse">
                <div class="large-8 small-9 columns">
                    <input type="text" id="searchbox" name="genre" placeholder="Find By Genre" data-toggle-focus="form-callout" ></input>
                </div>
                <div class="large-4 small-3 columns">
                    <!-- <input  type="submit" value="submit" onclick="return foo();" ></input> -->
                    <a href="javascript:callsearchbox();" class="button expand" >Search</a>
                </div>
            </div>
            <div class="is-hidden" id="form-callout" data-toggler="is-hidden">
                <span class="warning tiny button">Sci-Fi</span>
                <span class="alert large button">Comedy</span>
                <span class="secondary small button">Fantasy</span>
            </div>
        </form>

        <div class="social-header">
            <a href="#"><i class="fi-social-facebook"></i></a>
            <a href="#"><i class="fi-social-medium"></i></a>
            <a href="#"><i class="fi-social-rdio"></i></a>
        </div>
    </div>

    <div id="main" class="medium-12 large-9 columns">


<link rel="stylesheet" href="/static/css/header_panel.css">

<div class="content">
    <h4>Description</h4>

    <div class="row ">
        <div class="large-4 columns">
            <a href="#"> <span> </span><img src="static/img/Game of Thrones.jpg" alt="book cover" class=" thumbnail"></a>
        </div>
        <div class="large-8 columns">
            <div class="row">
                <div class=" large-9 columns">
                    <h2>Game of Thrones </h2>
                    <h5><a href="#"> Ned Stark, Lord of Winterfell, becomes the Hand of the King after the former Hand, Jon Arryn, has passed away. But before Ned goes to the capital, King&#39;s Landing, a letter arrives from his wife&#39;s sist </a></h5>
                </div>
                <!--div class=" large-3 columns">
                    <a href="#"  class="button  expand medium"><span>Open Book</span> </a>
                    <a href="#"  class="button  expand medium"><span>Add to List</span></a>
                </div-->
                <div class="row">
                    <div class=" large-6 columns">
                        <ul class="large-block-grid-2">
                            <li><strong>Company: </strong>Home Box Office (HBO) </li>
                            <li><strong>Genres: </strong>Adventure Drama Fantasy</li>
                            <li><strong>Tagline: </strong> Winter is coming. </li>
                        </ul>
                    </div>
                    <div class=" large-6 columns">
                        <ul class="large-block-grid-2">
                            <li><strong>Release Date: </strong> 17 April 2011 (USA) </li>
                            <li><strong>Rating: </strong> 9.5 (945329) </li>
                            <ul><strong> <a href="http://akas.imdb.com/title/tt0944947/combined"> More info </a> </strong> </ul>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- <hr> -->
    </div>
</div>


<ul class="tabs" data-tabs id="example-tabs">
    <li class="tabs-title is-active"><a href="#panel2">How Do People Feel</a></li>
    <li class="tabs-title"><a href="#panel1" aria-selected="true">What People Say</a></li>
    <li class="tabs-title"><a href="#panel3" >Tweet Heatmap</a></li>
</ul>
<div class="tabs-content" data-tabs-content="example-tabs">
    <div class="tabs-panel is-active" id="panel2"  style="width: 100%; height: 30em;">
      <!-- <div><text fill="#222222" stroke-width="0" stroke="none" font-size="14" font-family="Arial" y="107.9" x="561" text-anchor="start">Work</text></div> -->
    </div>
    <div class="tabs-panel" id="panel1">
      <div class="content">


          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Kyle Andrew</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>#nw Game of Thrones </p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">benSss</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Game of Thrones..</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Yki Sez</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Game of thrones...</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Farid Rahman</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Game of Thrones</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Zoe Heiler</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>@DanCreate_ game of thrones</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Romain Lopez</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>watching Game of Thrones</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">yanna</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Game of Thrones S6E03</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">huilaxy</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>@hespify         - game of thrones :D</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">joan pan</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>RT @louss30:           game of thrones         </p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Canelas</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Game of Thrones!! Est quaasseeee!!!</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">chris</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>RT @louss30:           game of thrones         </p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">MANIC PREACHER 1989</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>RT @louss30:           game of thrones         </p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Filmfabrik</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>@KupferFuchs Game of Thrones....? XD</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Lucy Brown</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Finally starting Game of Thrones.......</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Azmar Middleton</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Rewatching Sundays episode of game of thrones</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Owen Gardner</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>Can&#39;t t for game of thrones</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Nyquillus Dillwad</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>@LizardBuckholt it&#39;s okay bc Game of Thrones.</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Miss Nick</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>15 dias pra game of thrones </p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">Tatyana</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>@mussaa92  game of thrones or mr robot</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

          <article class="article">
              <img alt="person" class="author" src="http://placeimg.com/46/46/people">
              <p class="subheader"><a href="#">M</a>
                  under <a href="#"> <span class="label">Tweet</span></a> <a href="#"><span class="alert label">Like</span></a>
              </p>
              <p>@tatiyana444  game of thrones or mr robot</p>
              <!-- <a href="#" class="ghost button">Comment &rarrlp;</a> -->
          </article>

      </div>
    </div>
    <div class="tabs-panel" id="panel3" style="width: 100%; height:400px; position: static"></div>
</div>


    </div>
</div>
<script src="static/js/lib/vendor.js"></script>
<script src="static/js/lib/foundation.js"></script>
<!--<script src="assets/js/docs.js"></script>-->
<script>
    $(function(){
        $(document).foundation();
    });
</script>
<script>
    $(document).ready(function(){});

// this is for button only
function callsearchbox(){
    var genre = $("#searchbox").val();
    location.href = "/search?genre="+genre;
}

function login(){
    var password = $("#password").val() || "1234",
        username = $("#username").val() || "guest";
    $.post(
        "http://finalproject-dev.us-west-2.elasticbeanstalk.com/login_user/",
        { "password": password, "username": username },
        function(data) {
            console.log(data);
        },
        "jsonp"
    );
    location.href = "/";
}

function getusersession(){
    $.get(
        "http://finalproject-dev.us-west-2.elasticbeanstalk.com/get_username/",
        function(data) {
            var title = data.username;
            if (title)
                $("#user").text("a")
        }
    );
}

getusersession();

</script>



<!-- get sentiment data by genre and initMap -->
<script type="text/javascript">
var genre = "Adventure";
var tv_name = "Game of Thrones";
</script>
<script async type="text/javascript" src="static/js/map.js"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDDhmjEizB3PyRpcPrKCaqg6ugtJJlFIw8&libraries=visualization&callback=initMap"></script>


<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="static/js/d3.legend.js"></script>

<script>

// ----------- resize google map  ------------

// [jQuery - Fire event if CSS class changed - Stack Overflow](http://stackoverflow.com/questions/1950038)
(function(){
    // Your base, I'm in it!
    var originalAddClassMethod = jQuery.fn.addClass;
    jQuery.fn.addClass = function(){
        // Execute the original method.
        var result = originalAddClassMethod.apply( this, arguments );
        // trigger a custom event
        jQuery(this).trigger('cssClassChanged');
        // return the original result
        return result;
    }
})();
$(function(){
    $("#panel3").bind('cssClassChanged', function(){
        // [javascript - Embed google map is wrong displayed until resizing webpage - Stack Overflow](http://stackoverflow.com/questions/19003291)
        google.maps.event.trigger(map, 'resize');
        map.panTo(mapcenter);
    });
});


// ----------- pie chart ------------
// [The Amazing Pie - bl.ocks.org](http://bl.ocks.org/mbostock/4341574)
// [Arc Tween - bl.ocks.org](http://bl.ocks.org/mbostock/5100636)
// [d3.legend with line or circle icons - bl.ocks.org](http://bl.ocks.org/kielni/a4347fe16864903fb9be)
function drawPieChart(){

    var width = $("#example-tabs").width(),
        height =  $("#panel2").height(),
        radius = Math.min(width, height) / 2 - 10;

    var data = [4,2,4];
    var legend = ["negative", "neutral", "positive" ];

    var color = ["lightblue", "yellow", "pink"];

    var arc = d3.svg.arc()
        .outerRadius(radius);

    var pie = d3.layout.pie();

    var svg = d3.select("#panel2").append("svg")
        .datum(data)
        .attr("width", width)
        .attr("height", height)
      .append("g")
        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    var arcs = svg.selectAll("g.arc")
        .data(pie)
      .enter().append("g")
        .attr("class", "arc");

    arcs.append("path")
        .attr("fill", function(d, i) { return color[i]; })
        .attr("data-legend",function(d, i) { return legend[i]})
      .transition()
        .ease("bounce")
        .duration(2000)
        .attrTween("d", tweenPie)
      .transition()
        .ease("elastic")
        .delay(function(d, i) { return 2000 + i * 50; })
        .duration(750)
        .attrTween("d", tweenDonut);

    function tweenPie(b) {
      b.innerRadius = 0;
      var i = d3.interpolate({startAngle: 0, endAngle: 0}, b);
      return function(t) { return arc(i(t)); };
    }

    function tweenDonut(b) {
      b.innerRadius = radius * .6;
      var i = d3.interpolate({innerRadius: 0}, b);
      return function(t) { return arc(i(t)); };
    }

    var legend = svg.append("g")
          .attr("class","legend")
          .attr("transform","translate(50,30)")
          .style("font-size","20px")
          .call(d3.legend);

}
drawPieChart();

</script>


</body>
</html>
